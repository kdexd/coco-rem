from detectron2.data.datasets.lvis import (
    get_lvis_instances_meta,
    register_lvis_instances,
)

# This mapping is extracted from the official LVIS mapping:
# https://github.com/lvis-dataset/lvis-api/blob/master/data/coco_to_synset.json
COCO_CATEGORIES_IN_LVIS = [
    {"coco_id": 1, "lvis_id": 793, "synset": "person.n.01"},
    {"coco_id": 2, "lvis_id": 94, "synset": "bicycle.n.01"},
    {"coco_id": 3, "lvis_id": 207, "synset": "car.n.01"},
    {"coco_id": 4, "lvis_id": 703, "synset": "motorcycle.n.01"},
    {"coco_id": 5, "lvis_id": 3, "synset": "airplane.n.01"},
    {"coco_id": 6, "lvis_id": 173, "synset": "bus.n.01"},
    {"coco_id": 7, "lvis_id": 1115, "synset": "train.n.01"},
    {"coco_id": 8, "lvis_id": 1123, "synset": "truck.n.01"},
    {"coco_id": 9, "lvis_id": 118, "synset": "boat.n.01"},
    {"coco_id": 10, "lvis_id": 1112, "synset": "traffic_light.n.01"},
    {"coco_id": 11, "lvis_id": 445, "synset": "fireplug.n.01"},
    {"coco_id": 13, "lvis_id": 1019, "synset": "stop_sign.n.01"},
    {"coco_id": 14, "lvis_id": 766, "synset": "parking_meter.n.01"},
    {"coco_id": 15, "lvis_id": 90, "synset": "bench.n.01"},
    {"coco_id": 16, "lvis_id": 99, "synset": "bird.n.01"},
    {"coco_id": 17, "lvis_id": 225, "synset": "cat.n.01"},
    {"coco_id": 18, "lvis_id": 378, "synset": "dog.n.01"},
    {"coco_id": 19, "lvis_id": 569, "synset": "horse.n.01"},
    {"coco_id": 20, "lvis_id": 943, "synset": "sheep.n.01"},
    {"coco_id": 21, "lvis_id": 80, "synset": "beef.n.01"},
    {"coco_id": 22, "lvis_id": 422, "synset": "elephant.n.01"},
    {"coco_id": 23, "lvis_id": 76, "synset": "bear.n.01"},
    {"coco_id": 24, "lvis_id": 1202, "synset": "zebra.n.01"},
    {"coco_id": 25, "lvis_id": 496, "synset": "giraffe.n.01"},
    {"coco_id": 27, "lvis_id": 34, "synset": "backpack.n.01"},
    {"coco_id": 28, "lvis_id": 1133, "synset": "umbrella.n.01"},
    {"coco_id": 31, "lvis_id": 35, "synset": "bag.n.04"},
    {"coco_id": 32, "lvis_id": 716, "synset": "necktie.n.01"},
    {"coco_id": 33, "lvis_id": 36, "synset": "bag.n.06"},
    {"coco_id": 34, "lvis_id": 474, "synset": "frisbee.n.01"},
    {"coco_id": 35, "lvis_id": 964, "synset": "ski.n.01"},
    {"coco_id": 36, "lvis_id": 976, "synset": "snowboard.n.01"},
    {"coco_id": 37, "lvis_id": 41, "synset": "ball.n.06"},
    {"coco_id": 38, "lvis_id": 611, "synset": "kite.n.03"},
    {"coco_id": 39, "lvis_id": 58, "synset": "baseball_bat.n.01"},
    {"coco_id": 40, "lvis_id": 60, "synset": "baseball_glove.n.01"},
    {"coco_id": 41, "lvis_id": 962, "synset": "skateboard.n.01"},
    {"coco_id": 42, "lvis_id": 1037, "synset": "surfboard.n.01"},
    {"coco_id": 43, "lvis_id": 1079, "synset": "tennis_racket.n.01"},
    {"coco_id": 44, "lvis_id": 133, "synset": "bottle.n.01"},
    {"coco_id": 46, "lvis_id": 1190, "synset": "wineglass.n.01"},
    {"coco_id": 47, "lvis_id": 344, "synset": "cup.n.01"},
    {"coco_id": 48, "lvis_id": 469, "synset": "fork.n.01"},
    {"coco_id": 49, "lvis_id": 615, "synset": "knife.n.01"},
    {"coco_id": 50, "lvis_id": 1000, "synset": "spoon.n.01"},
    {"coco_id": 51, "lvis_id": 139, "synset": "bowl.n.03"},
    {"coco_id": 52, "lvis_id": 45, "synset": "banana.n.02"},
    {"coco_id": 53, "lvis_id": 12, "synset": "apple.n.01"},
    {"coco_id": 54, "lvis_id": 912, "synset": "sandwich.n.01"},
    {"coco_id": 55, "lvis_id": 735, "synset": "orange.n.01"},
    {"coco_id": 56, "lvis_id": 154, "synset": "broccoli.n.01"},
    {"coco_id": 57, "lvis_id": 217, "synset": "carrot.n.01"},
    {"coco_id": 59, "lvis_id": 816, "synset": "pizza.n.01"},
    {"coco_id": 60, "lvis_id": 387, "synset": "doughnut.n.02"},
    {"coco_id": 61, "lvis_id": 183, "synset": "cake.n.03"},
    {"coco_id": 62, "lvis_id": 232, "synset": "chair.n.01"},
    {"coco_id": 63, "lvis_id": 982, "synset": "sofa.n.01"},
    {"coco_id": 64, "lvis_id": 837, "synset": "pot.n.04"},
    {"coco_id": 65, "lvis_id": 77, "synset": "bed.n.01"},
    {"coco_id": 67, "lvis_id": 367, "synset": "dining_table.n.01"},
    {"coco_id": 70, "lvis_id": 1097, "synset": "toilet.n.02"},
    {"coco_id": 72, "lvis_id": 1077, "synset": "television_receiver.n.01"},
    {"coco_id": 73, "lvis_id": 631, "synset": "laptop.n.01"},
    {"coco_id": 74, "lvis_id": 705, "synset": "mouse.n.04"},
    {"coco_id": 75, "lvis_id": 881, "synset": "remote_control.n.01"},
    {"coco_id": 76, "lvis_id": 296, "synset": "computer_keyboard.n.01"},
    {"coco_id": 77, "lvis_id": 230, "synset": "cellular_telephone.n.01"},
    {"coco_id": 78, "lvis_id": 687, "synset": "microwave.n.02"},
    {"coco_id": 79, "lvis_id": 739, "synset": "oven.n.01"},
    {"coco_id": 80, "lvis_id": 1095, "synset": "toaster.n.02"},
    {"coco_id": 81, "lvis_id": 961, "synset": "sink.n.01"},
    {"coco_id": 82, "lvis_id": 421, "synset": "electric_refrigerator.n.01"},
    {"coco_id": 84, "lvis_id": 127, "synset": "book.n.01"},
    {"coco_id": 85, "lvis_id": 271, "synset": "clock.n.01"},
    {"coco_id": 86, "lvis_id": 1139, "synset": "vase.n.01"},
    {"coco_id": 87, "lvis_id": 923, "synset": "scissors.n.01"},
    {"coco_id": 88, "lvis_id": 1071, "synset": "teddy.n.01"},
    {"coco_id": 89, "lvis_id": 534, "synset": "hand_blower.n.01"},
    {"coco_id": 90, "lvis_id": 1102, "synset": "toothbrush.n.01"},
]


def register_cocofied_lvis():
    # COCO-fied LVIS v1 val - instances for COCO classes, masks from LVIS.
    register_lvis_instances(
        "lvis_v1_val_cocofied",
        get_lvis_instances_meta("lvis_v1_val_cocofied"),
        json_file="datasets/lvis/lvis_v1_val_cocofied.json",
        image_root="datasets/coco/",
    )
